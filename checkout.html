<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Checkout | Titan Mart BD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#f5f5f5}
.container{max-width:650px;margin:30px auto;background:#fff;padding:20px;border-radius:8px}
h2{text-align:center}
input,select{width:100%;padding:10px;margin-top:10px;border:1px solid #ccc;border-radius:5px}
button{width:100%;padding:12px;margin-top:15px;background:#ff4c00;color:#fff;border:none;font-size:16px;border-radius:5px;cursor:pointer}
.lang-btn{ text-align:right; cursor:pointer; color:#ff4c00; font-weight:bold; }
.info{margin-top:10px}
img.product-img{width:100%;max-height:250px;object-fit:contain;margin-top:10px;border-radius:5px}
</style>
</head>
<body>

<div class="container">
  <div class="lang-btn" onclick="toggleLang()">EN</div>
  <h2 id="title">‡¶ö‡ßá‡¶ï‡¶Ü‡¶â‡¶ü</h2>

  <img id="productImg" class="product-img" src="" alt="Product Image">

  <input id="name" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ" required>
  <input id="phone" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞" required>
  <input id="address" placeholder="‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ" required>

  <select id="qty">
    <option value="1">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ 1</option>
    <option value="2">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ 2</option>
    <option value="3">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ 3</option>
    <option value="4">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ 4</option>
  </select>

  <div class="info"><b id="pLabel">‡¶™‡¶£‡ßç‡¶Ø:</b> <span id="product"></span></div>
  <div class="info"><b id="tLabel">‡¶Æ‡ßã‡¶ü:</b> ‡ß≥ <span id="total"></span></div>

  <div class="info">
    <b id="dLabel">‡¶ú‡ßá‡¶≤‡¶æ:</b>
    <input type="text" id="districtSearch" placeholder="‡¶ú‡ßá‡¶≤‡¶æ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®...">
    <select id="district"></select>
  </div>

  <div class="info">
    <b id="thLabel">‡¶•‡¶æ‡¶®‡¶æ/‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ:</b>
    <input type="text" id="thanaSearch" placeholder="‡¶•‡¶æ‡¶®‡¶æ/‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®...">
    <select id="thana"></select>
  </div>

  <button onclick="placeOrder()" id="btn">‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
</div>

<script>
// Product image + price
const params = new URLSearchParams(window.location.search);
const product = params.get("product");
const price = parseInt(params.get("price"));
document.getElementById("product").innerText = product;
document.getElementById("productImg").src = product==="Arc Lighter"?"images/arc-lighter.jpg":"images/nose-hair-trimmer.jpg";

// Total calc
function calc(){ document.getElementById("total").innerText = price * document.getElementById("qty").value; }
calc();
document.getElementById("qty").onchange = calc;

// Unique order ID
function orderID(){ return "TM" + Math.floor(100000 + Math.random()*900000); }

// WhatsApp Order
function placeOrder(){
  const id = orderID();
  const name = document.getElementById("name").value;
  const phone = document.getElementById("phone").value;
  const address = document.getElementById("address").value;
  const qty = document.getElementById("qty").value;
  const total = document.getElementById("total").innerText;
  const district = document.getElementById("district").value;
  const thana = document.getElementById("thana").value;

  const msg =
`Order ID: ${id}
Name: ${name}
Phone: ${phone}
Address: ${address}
District: ${district}
Thana/Upazila: ${thana}
Product: ${product}
Quantity: ${qty}
Total: ‡ß≥${total}`;

  window.open("https://wa.me/8801980236917?text="+encodeURIComponent(msg), "_blank");
}

// Bangla / English toggle
let bn=true;
function toggleLang(){
  bn=!bn;
  document.getElementById("title").innerText=bn?"‡¶ö‡ßá‡¶ï‡¶Ü‡¶â‡¶ü":"Checkout";
  document.getElementById("name").placeholder=bn?"‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ":"Your Name";
  document.getElementById("phone").placeholder=bn?"‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞":"Phone Number";
  document.getElementById("address").placeholder=bn?"‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ":"Full Address";
  document.getElementById("pLabel").innerText=bn?"‡¶™‡¶£‡ßç‡¶Ø:":"Product:";
  document.getElementById("tLabel").innerText=bn?"‡¶Æ‡ßã‡¶ü:":"Total:";
  document.getElementById("dLabel").innerText=bn?"‡¶ú‡ßá‡¶≤‡¶æ:":"District:";
  document.getElementById("thLabel").innerText=bn?"‡¶•‡¶æ‡¶®‡¶æ/‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ:":"Thana/Upazila:";
  document.getElementById("btn").innerText=bn?"‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶®":"Confirm Order";
  document.querySelector(".lang-btn").innerText=bn?"EN":"BN";
}

// üìç Districts + Upazilas JSON (complete)
const bangladeshAreas = {
"Dhaka":["Dhaka Sadar","Dhamrai","Dohar","Keraniganj","Nawabganj","Savar"],
"Gazipur":["Gazipur Sadar","Kaliganj","Kapasia","Sreepur"],
"Narayanganj":["Narayanganj Sadar","Fatulla","Arahazar","Sonargaon","Rupganj"],
// ... rest of all 64 districts & all their upazilas should be added here
"Chattogram":["Anwara","Banshkhali","Boalkhali","Chandanaish","Fatikchhari","Hathazari","Lohagara","Patiya","Rangunia","Sandwip","Satkania","Sitakunda","Mirsharai","Raozan"],
"Khulna":["Khulna Sadar","Batiaghata","Dacope","Dumuria","Paikgachha","Phultala","Koyra","Terokhada"],
// (etc. ‚Äî this list must include full 64 district with all upazilas)
};

// Populate district
const districtSel=document.getElementById("district");
for(let d in bangladeshAreas){
  let o=document.createElement("option");
  o.value=d; o.text=d;
  districtSel.add(o);
}

// Populate thana when district changes
function populateThana(){
  const thanaSel = document.getElementById("thana");
  thanaSel.innerHTML = "";
  let list = bangladeshAreas[districtSel.value] || [];
  list.forEach(t=>{
    let o=document.createElement("option");
    o.value=t; o.text=t;
    thanaSel.add(o);
  });
}
districtSel.onchange = function(){
  populateThana();
};

// Search filters for district/thana
document.getElementById("districtSearch").oninput=function(){
  let filter=this.value.toLowerCase();
  districtSel.innerHTML="";
  for(let d in bangladeshAreas){
    if(d.toLowerCase().includes(filter)){
      let o=document.createElement("option");o.value=d;o.text=d; districtSel.add(o);
    }
  }
  populateThana();
};
document.getElementById("thanaSearch").oninput=function(){
  let filter=this.value.toLowerCase();
  let thanaSel=document.getElementById("thana");
  thanaSel.innerHTML="";
  let list = bangladeshAreas[districtSel.value] || [];
  list.filter(t=>t.toLowerCase().includes(filter)).forEach(t=>{
    let o=document.createElement("option");o.value=t;o.text=t;
    thanaSel.add(o);
  });
};

populateThana();
</script>

</body>
</html>
