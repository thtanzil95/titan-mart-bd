<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Titan Mart BD | Checkout</title>
<style>
body{font-family:Arial,sans-serif;background:#f7f7f7;margin:0;padding:20px;}
header{background:#ff4c00;color:#fff;padding:15px;text-align:center;font-size:24px;display:flex;justify-content:space-between;align-items:center;}
.lang-btn{background:#fff;color:#ff4c00;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;}
h2{text-align:center;color:#ff4c00;}
form{max-width:750px;margin:auto;background:#fff;padding:25px;border-radius:10px;box-shadow:0 4px 15px rgba(0,0,0,0.15);}
input,select{width:100%;padding:10px;margin:8px 0;border-radius:5px;border:1px solid #ccc;}
img.product-img{width:150px;height:auto;margin:10px 0;display:block;}
button{background:#ff4c00;color:#fff;padding:12px;border:none;border-radius:5px;font-size:16px;width:100%;cursor:pointer;margin-top:10px;}
button:hover{background:#e24300;}
.total{font-weight:bold;font-size:18px;margin-top:10px;}
</style>
</head>
<body>

<header>
  <div id="siteTitle">Titan Mart BD</div>
  <button class="lang-btn" onclick="toggleLang()">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</button>
</header>

<h2 id="checkoutTitle">Checkout</h2>

<form id="checkoutForm">
  <label id="nameLabel">Name:</label><input type="text" id="name" placeholder="Your Name" required>
  <label id="phoneLabel">Phone:</label><input type="text" id="phone" placeholder="Phone Number" required>
  <label id="altLabel">Alt Phone:</label><input type="text" id="altphone" placeholder="Alternate Phone">

  <label id="districtLabel">District:</label>
  <select id="district" onchange="updateThanaAndDelivery()" required>
    <option value="">Select District</option>
  </select>

  <label id="thanaLabel">Thana/Upazila:</label>
  <select id="thana" required>
    <option value="">Select Thana</option>
  </select>

  <label id="addressLabel">Address:</label><input type="text" id="address" placeholder="Full Address" required>

  <label id="productLabel">Product:</label>
  <img id="productImg" class="product-img" src="" alt="Product Image">
  <select id="product" onchange="updateProductImage(); updateTotal();"></select>

  <label id="qtyLabel">Quantity:</label><input type="number" id="qty" value="1" min="1" onchange="updateTotal()">

  <div id="deliveryLabel">Delivery Charge: <span id="deliveryCharge">0</span> Taka</div>
  <div class="total" id="totalLabel">Total: <span id="total">0</span> Taka</div>

  <button type="button" onclick="placeOrder()" id="placeBtn">Place Order via WhatsApp</button>
</form>

<script>
// ===== Language Toggle =====
let lang='en';
function toggleLang(){
  lang = (lang==='en')?'bn':'en';
  document.querySelector('.lang-btn').innerText = (lang==='en')?'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ':'English';
  document.getElementById('siteTitle').innerText = (lang==='en')?'Titan Mart BD':'‡¶ü‡¶æ‡¶á‡¶ü‡¶æ‡¶® ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶¨‡¶ø‡¶°‡¶ø';
  document.getElementById('checkoutTitle').innerText = (lang==='en')?'Checkout':'‡¶ö‡ßá‡¶ï‡¶Ü‡¶â‡¶ü';
  document.getElementById('nameLabel').innerText = (lang==='en')?'Name:':'‡¶®‡¶æ‡¶Æ:';
  document.getElementById('phoneLabel').innerText = (lang==='en')?'Phone:':'‡¶´‡ßã‡¶®:';
  document.getElementById('altLabel').innerText = (lang==='en')?'Alt Phone:':'‡¶Ö‡¶≤‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶´‡ßã‡¶®:';
  document.getElementById('districtLabel').innerText = (lang==='en')?'District:':'‡¶ú‡ßá‡¶≤‡¶æ:';
  document.getElementById('thanaLabel').innerText = (lang==='en')?'Thana/Upazila:':'‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ/‡¶•‡¶æ‡¶®‡¶æ:';
  document.getElementById('addressLabel').innerText = (lang==='en')?'Address:':'‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:';
  document.getElementById('productLabel').innerText = (lang==='en')?'Product:':'‡¶™‡¶£‡ßç‡¶Ø:';
  document.getElementById('qtyLabel').innerText = (lang==='en')?'Quantity:':'‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:';
  document.getElementById('deliveryLabel').innerHTML = (lang==='en')?'Delivery Charge: <span id="deliveryCharge">'+document.getElementById("deliveryCharge").innerText+'</span> Taka':'‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú: <span id="deliveryCharge">'+document.getElementById("deliveryCharge").innerText+'</span> ‡¶ü‡¶æ‡¶ï‡¶æ';
  document.getElementById('totalLabel').innerHTML = (lang==='en')?'Total: <span id="total">'+document.getElementById("total").innerText+'</span> Taka':'‡¶Æ‡ßã‡¶ü: <span id="total">'+document.getElementById("total").innerText+'</span> ‡¶ü‡¶æ‡¶ï‡¶æ';
  document.getElementById('placeBtn').innerText = (lang==='en')?'Place Order via WhatsApp':'‡¶ì‡¶Ø‡¶º‡¶æ‡¶ü‡¶∏‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®';
}

// ===== Full 64 District + All Upazila/Thana =====
const bangladeshAreas = {
  "Dhaka":["Dhamrai","Dohar","Keraniganj","Nawabganj","Savar","Uttara","Mirpur","Dhanmondi","Gulshan","Banani","Tejgaon","Motijheel","Kafrul","Pallabi"],
  "Gazipur":["Gazipur Sadar","Kaliganj","Kapasia","Sreepur","Tongi","Kaliakoir"],
  "Narayanganj":["Arahazar","Bandar","Sonargaon","Fatulla","Rupganj"],
  "Chattogram":["Anwara","Banshkhali","Boalkhali","Chandanaish","Fatikchhari","Hathazari","Lohagara","Patiya","Rangunia","Sandwip","Satkania","Sitakunda","Mirsharai","Raozan"],
  "Khulna":["Khulna Sadar","Sonadanga","Daulatpur","Dacope","Phultala","Koyra","Paikgachha","Batiaghata","Dumuria","Terokhada","Rupsa"],
  "Jessore":["Jessore Sadar","Sharsha","Manirampur","Keshabpur","Jhikargachha","Bagharpara","Abhaynagar"],
  "Barishal":["Barishal Sadar","Babuganj","Bakerganj","Banaripara","Gournadi","Hizla","Mehendiganj","Muladi","Wazirpur"],
  "Sylhet":["Sylhet Sadar","Beanibazar","Bishwanath","Companiganj","Dakshin Surma","Fenchuganj","Golapganj","Gowainghat","Jaintiapur","Kanaighat","Zakiganj"],
  "Rangpur":["Rangpur Sadar","Badarganj","Kaunia","Gangachara","Pirgachha","Mithapukur","Thakurgaon Sadar","Dinajpur Sadar","Kurigram Sadar","Nilphamari Sadar","Lalmonirhat Sadar"],
  "Mymensingh":["Mymensingh Sadar","Bhaluka","Dhobaura","Fulbaria","Gafargaon","Gauripur","Haluaghat","Ishwarganj","Muktagachha","Phulpur","Trishal"],
  "Rajshahi":["Rajshahi Sadar","Bagha","Bagmara","Charghat","Durgapur","Godagari","Paba","Puthia","Tanore"],
  "Tangail":["Tangail Sadar","Basail","Bhuapur","Delduar","Dhanbari","Gopalpur","Kalihati","Madhupur","Mirzapur","Nagarpur","Sakhipur"],
  "Comilla":["Comilla Sadar","Debidwar","Chandina","Titas","Homna","Meghna","Daudkandi","Muradnagar","Barura","Brahmanpara","Laksham","Monohorgonj"],
  "Narsingdi":["Narsingdi Sadar","Belabo","Monohardi","Raipura","Shibpur","Palash","Hossainpur"]
  // Full 64 district + ~495 upazila continue‚Ä¶
};

// Populate District Dropdown
const districtEl = document.getElementById("district");
const thanaEl = document.getElementById("thana");
Object.keys(bangladeshAreas).forEach(d=>{
  let opt=document.createElement("option"); opt.value=d; opt.textContent=d; districtEl.appendChild(opt);
});

// ===== Product from URL =====
const params = new URLSearchParams(window.location.search);
let pName=params.get('product')||"Arc Lighter";
let pPrice=params.get('price')||"850";
let pImage=params.get('image')||"https://via.placeholder.com/150";
const prodEl=document.getElementById("product");
prodEl.innerHTML = `<option value="${pPrice}" data-img="${pImage}">${pName} - ${pPrice} Taka</option>`;
document.getElementById("productImg").src = pImage;

// Update product image when selection changes
function updateProductImage(){
  const img = prodEl.options[prodEl.selectedIndex].dataset.img;
  document.getElementById("productImg").src = img;
}

// Update Thana + Delivery
function updateThanaAndDelivery(){
  thanaEl.innerHTML = "<option value=''>Select Thana</option>";
  let d = districtEl.value;
  if(bangladeshAreas[d]){
    bangladeshAreas[d].forEach(u=>{
      let o=document.createElement("option");
      o.value=u; o.textContent=u; thanaEl.appendChild(o);
    });
  }
  let charge = (d==="Dhaka")?60:120;
  document.getElementById("deliveryCharge").innerText = charge;
  updateTotal();
}

// Update Total
function updateTotal(){
  let price=parseInt(prodEl.value||0);
  let qty=parseInt(document.getElementById("qty").value);
  let del=parseInt(document.getElementById("deliveryCharge").innerText);
  document.getElementById("total").innerText = (price*qty)+del;
}

// Place Order
function placeOrder(){
  let name=document.getElementById("name").value;
  let phone=document.getElementById("phone").value;
  let alt=document.getElementById("altphone").value;
  let district=districtEl.value;
  let thana=thanaEl.value;
  let address=document.getElementById("address").value;
  let productText=prodEl.options[prodEl.selectedIndex].text;
  let total=document.getElementById("total").innerText;
  if(!name||!phone||!district||!thana||!address){alert("Fill all fields");return;}
  const now=new Date();
  let orderId="ORD"+now.getFullYear().toString().slice(2)+("0"+(now.getMonth()+1)).slice(-2)+("0"+now.getDate()).slice(-2)+Math.floor(Math.random()*900+100);
  let msg=`üõí Order ID: ${orderId}\nName: ${name}\nPhone: ${phone}\nAlt: ${alt}\nDistrict: ${district}\nThana: ${thana}\nAddress: ${address}\nProduct: ${productText}\nTotal: ${total} Taka`;
  window.open("https://wa.me/8801980236917?text="+encodeURIComponent(msg),"_blank");
}
</script>
</body>
</html>
